<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/applayout/pageTemplate.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
>
    <ui:define name="content">
        <b:container>
            <body>
            <h:panelGroup>
                <b:form col-md="12" id="formDespesas">
                    <b:messages col-md="12" showDetail="true"/>

                    <b:inputText required="true" required-message="O campo Descrição é obrigatório" id="descricao"
                                 col-md="12"
                                 value="#{despesasController.despesas.descricao}" label="Descrição"/>

                    <b:selectOneMenu required="true" required-message="O campo Tipo é obrigatório" id="tipo"
                                     label="Tipo" col-md="5"
                                     value="#{despesasController.despesas.tipo}"
                                     converter="#{tipoConverter}">
                        <f:selectItems var="tipo" value="#{despesasController.listTipos}"
                                       itemLabel="#{tipo.descricao}" itemValue="#{tipo}"/>
                    </b:selectOneMenu>


                    <b:inputText mask="9{1,4}.9{2,2}" required="true" required-message="O campo Valor é obrigatório"
                                 id="valor" col-md="5"
                                 value="#{despesasController.despesas.valor}" label="Valor"/>

                    <b:selectBooleanCheckbox col-md="2" value="#{despesasController.despesas.status}" caption="Pago"
                                             label="Status"/>

                    <b:selectOneMenu required="true" required-message="O campo Veiculo é obrigatório" id="veiculo"
                                     label="Veiculo" col-md="12"
                                     value="#{despesasController.despesas.veiculo}"
                                     converter="#{veiculoConverter}">
                        <f:selectItems var="veiculo" value="#{despesasController.listVeiculos}"
                                       itemLabel="#{veiculo.nome}" itemValue="#{veiculo}"/>
                    </b:selectOneMenu>

                    <b:commandButton col-md="2" value="Novo" action="#{despesasController.novo}"/>
                    <b:commandButton col-md="2" look="success" icon="check" value="Salvar"
                                     action="#{despesasController.salvar}"/>
                </b:form>

            </h:panelGroup>
            <h:panelGroup>
                <b:form id="formDespesasLista" style="overflow-x: auto"
                        horizontal="true">
                    <b:dataTable responsive="true" paginated="false" id="grid" col-sm="12"
                                 value="#{despesasController.listDespesasUser}" var="d"
                                 style="margin-top:7%"
                                 customLangUrl="//cdn.datatables.net/plug-ins/1.10.12/i18n/Portuguese-Brasil.json">
                        <b:dataTableColumn value="#{d.descricao}" label="Descrição"/>
                        <b:dataTableColumn value="#{d.tipo.descricao}" label="Tipo"/>
                        <b:dataTableColumn value="#{d.valor}" label="Valor"/>
                        <b:dataTableColumn rendered="#{d.status != true}" value="Não pago" label="Status"/>
                        <b:dataTableColumn rendered="#{d.status == true}" value="Pago" label="Status"/>
                        <b:dataTableColumn value="#{d.veiculo.nome}" label="Veículo"/>
                        <h:column>
                            <b:commandButton rendered="#{d.tipo.id != 3 and d.tipo.id != 2}" value="Editar"
                                             icon="pencil" label="Editar"
                                             styleClass="btn btn-default"
                                             action="#{despesasController.editar(d)}"/>
                        </h:column>
                        <h:column>
                            <b:commandButton rendered="#{d.tipo.id != 3 and d.tipo.id != 2}" value="Excluir"
                                             icon="trash" label="Excluir"
                                             styleClass="btn btn-danger"
                                             action="#{despesasController.excluir(d.id)}"
                                             onclick="if(!confirm('Deseja realmente excluir?!')) return false;"/>
                        </h:column>

                    </b:dataTable>
                </b:form>

            </h:panelGroup>
            </body>
        </b:container>
    </ui:define>
</ui:composition>



